.mappable--balloon-marker {
    --tail-height: 12px;
    --tail-width: 16px;
    --border-radius: 12px;

    --tail-height-and-offset: calc(var(--tail-height) + var(--offset));

    --balloon-tail-transform-top: translate(-50%, calc(-100% - var(--offset))) rotate(180deg);
    --balloon-tail-transform-bottom: translate(-50%, var(--offset));

    &.hide {
        display: none;
    }
}

.mappable--balloon-marker svg {
    display: block;
}

.mappable--balloon-marker_container {
    width: max-content;
    max-width: 500px;
    max-height: 600px;
    display: block;
    position: absolute;
    padding: 8px 12px;
    border-radius: var(--border-radius);
    background-color: #fff;
    color: #34374a;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px;
    box-shadow:
        0px 4px 12px 0px #5f69831a,
        0px 4px 24px 0px #5f69830a;
    overflow: hidden;
    text-overflow: ellipsis;

    &.mappable--balloon__dark {
        background-color: #272729;
        color: #c8c9cc;
    }
}

.mappable--balloon-marker_tail {
    display: block;
    position: absolute;
    color: #fff;

    &.mappable--balloon__dark {
        color: #272729;
    }

    svg {
        filter: drop-shadow(0px 4px 24px rgba(95, 105, 131, 0.04)) drop-shadow(0px 4px 12px rgba(95, 105, 131, 0.1));
    }
}

/* positions */
.position-top {
    .mappable--balloon-marker_container {
        transform: translate(-50%, calc(-100% - var(--tail-height-and-offset)));
    }
    .mappable--balloon-marker_tail {
        transform: var(--balloon-tail-transform-top);
    }
    /* top left */
    &.position-left {
        .mappable--balloon-marker_container {
            transform: translate(
                calc(-100% + var(--border-radius) + var(--tail-width) / 2),
                calc(-100% - var(--tail-height-and-offset))
            );
        }
        .mappable--balloon-marker_tail {
            transform: var(--balloon-tail-transform-top);
        }
    }
    /* top right */
    &.position-right {
        .mappable--balloon-marker_container {
            transform: translate(
                calc(-1 * var(--border-radius) - var(--tail-width) / 2),
                calc(-100% - var(--tail-height-and-offset))
            );
        }
        .mappable--balloon-marker_tail {
            transform: var(--balloon-tail-transform-top);
        }
    }
}

.position-bottom {
    .mappable--balloon-marker_container {
        transform: translate(-50%, var(--tail-height-and-offset));
    }
    .mappable--balloon-marker_tail {
        transform: var(--balloon-tail-transform-bottom);
    }
    /* bottom left */
    &.position-left {
        .mappable--balloon-marker_container {
            transform: translate(
                calc(-100% + var(--border-radius) + var(--tail-width) / 2),
                var(--tail-height-and-offset)
            );
        }
        .mappable--balloon-marker_tail {
            transform: var(--balloon-tail-transform-bottom);
        }
    }
    /* bottom right */
    &.position-right {
        .mappable--balloon-marker_container {
            transform: translate(
                calc(-1 * var(--border-radius) - var(--tail-width) / 2),
                var(--tail-height-and-offset)
            );
        }
        .mappable--balloon-marker_tail {
            transform: var(--balloon-tail-transform-bottom);
        }
    }
}

.position-left {
    .mappable--balloon-marker_container {
        transform: translate(calc(-100% - var(--tail-height-and-offset)), -50%);
    }
    .mappable--balloon-marker_tail {
        transform: translate(calc(-100% - var(--offset)), -50%) rotate(90deg);
    }
}

.position-right {
    .mappable--balloon-marker_container {
        transform: translate(var(--tail-height-and-offset), -50%);
    }
    .mappable--balloon-marker_tail {
        transform: translate(var(--offset), -50%) rotate(-90deg);
    }
}
